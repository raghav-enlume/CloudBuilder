{
    "us-east-1": {
        "vpcs": [
            {
                "VpcId": "vpc-event-001",
                "CidrBlock": "10.2.0.0/16",
                "State": "available"
            }
        ],
        "subnets": [
            {
                "SubnetId": "subnet-public-a",
                "VpcId": "vpc-event-001",
                "CidrBlock": "10.2.1.0/24",
                "AvailabilityZone": "us-east-1a",
                "Type": "public"
            },
            {
                "SubnetId": "subnet-private-a",
                "VpcId": "vpc-event-001",
                "CidrBlock": "10.2.2.0/24",
                "AvailabilityZone": "us-east-1a",
                "Type": "private"
            }
        ],
        "security_groups": [
            {
                "GroupId": "sg-api",
                "Description": "API SG",
                "InboundRules": [
                    {
                        "Protocol": "tcp",
                        "Port": 443,
                        "Source": "0.0.0.0/0"
                    }
                ]
            },
            {
                "GroupId": "sg-lambda",
                "Description": "Lambda SG",
                "InboundRules": []
            }
        ],
        "api_gateways": [
            {
                "ApiName": "event-api",
                "Type": "REST",
                "EndpointType": "regional",
                "Routes": [
                    {
                        "Path": "/events",
                        "Method": "POST",
                        "Integration": "lambda-producer"
                    }
                ]
            }
        ],
        "eventbridge": [
            {
                "EventBusName": "app-event-bus",
                "Rules": [
                    {
                        "RuleName": "order-created-rule",
                        "EventPattern": {
                            "source": [
                                "app.orders"
                            ],
                            "detail-type": [
                                "OrderCreated"
                            ]
                        },
                        "Targets": [
                            "lambda-order-processor",
                            "sqs-order-queue"
                        ]
                    }
                ]
            }
        ],
        "sns_topics": [
            {
                "TopicName": "order-events-topic",
                "Subscriptions": [
                    {
                        "Protocol": "sqs",
                        "Endpoint": "sqs-order-queue"
                    },
                    {
                        "Protocol": "lambda",
                        "Endpoint": "lambda-notification"
                    }
                ]
            }
        ],
        "sqs_queues": [
            {
                "QueueName": "sqs-order-queue",
                "VisibilityTimeout": 30,
                "DeadLetterQueue": "sqs-order-dlq"
            },
            {
                "QueueName": "sqs-order-dlq",
                "VisibilityTimeout": 30
            }
        ],
        "lambda_functions": [
            {
                "FunctionName": "lambda-producer",
                "Runtime": "nodejs18.x",
                "Handler": "producer.handler",
                "Triggers": [
                    "api_gateway"
                ],
                "Permissions": [
                    "events:PutEvents"
                ],
                "EnvironmentVariables": {
                    "EVENT_BUS": "app-event-bus"
                }
            },
            {
                "FunctionName": "lambda-order-processor",
                "Runtime": "nodejs18.x",
                "Handler": "order_processor.handler",
                "Triggers": [
                    "eventbridge",
                    "sqs"
                ],
                "Permissions": [
                    "dynamodb:PutItem"
                ],
                "EnvironmentVariables": {
                    "TABLE_NAME": "orders-table"
                }
            },
            {
                "FunctionName": "lambda-notification",
                "Runtime": "nodejs18.x",
                "Handler": "notify.handler",
                "Triggers": [
                    "sns"
                ],
                "Permissions": [
                    "ses:SendEmail"
                ]
            }
        ],
        "dynamodb_tables": [
            {
                "TableName": "orders-table",
                "PartitionKey": "order_id",
                "BillingMode": "PAY_PER_REQUEST",
                "Encryption": "AWS_MANAGED"
            }
        ],
        "cloudwatch": {
            "Logs": true,
            "Metrics": true
        }
    }
}