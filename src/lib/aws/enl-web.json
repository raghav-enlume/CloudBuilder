{
  "architecture": {
    "name": "blazeops-main-application",
    "region": "us-west-2",
    "vpc": {
      "id": "vpc-0d872966b39f4ea8d",
      "cidr": "10.0.0.0/16",
      "internet_gateway": {
        "id": "igw-01d6f9713399da5ca",
        "attached_to": "vpc-0d872966b39f4ea8d"
      },
      "nat_gateway": {
        "id": "nat-08f50d3bafb9d5043",
        "subnet": "public"
      },
      "subnets": {
        "public": [
          {
            "id": "subnet-073ef49609e45baae",
            "cidr": "10.0.1.0/24",
            "route_table": "rtb-0bff65edc339ff6de"
          },
          {
            "id": "subnet-09f866b987b0b0ee4",
            "cidr": "10.0.2.0/24",
            "route_table": "rtb-0bff65edc339ff6de"
          }
        ],
        "private": [
          {
            "id": "subnet-015e78643cad449b1",
            "cidr": "10.0.4.0/24",
            "route_table": "rtb-01409b82181bbb38f"
          },
          {
            "id": "subnet-09f403328962fd4af",
            "cidr": "10.0.3.0/24",
            "route_table": "rtb-01409b82181bbb38f"
          }
        ]
      },
      "route_tables": {
        "public": {
          "id": "rtb-0bff65edc339ff6de",
          "routes": [
            {
              "destination": "0.0.0.0/0",
              "target": "igw-01d6f9713399da5ca"
            },
            {
              "destination": "10.0.0.0/16",
              "target": "local"
            }
          ]
        },
        "private": {
          "id": "rtb-01409b82181bbb38f",
          "routes": [
            {
              "destination": "0.0.0.0/0",
              "target": "nat-08f50d3bafb9d5043"
            },
            {
              "destination": "10.0.0.0/16",
              "target": "local"
            }
          ]
        }
      }
    },
    "iam": {
      "roles": {
        "ec2_role": {
          "trusted_service": "ec2.amazonaws.com",
          "policies": [
            "AmazonEC2ContainerRegistryReadOnly",
            "AmazonS3ReadOnlyAccess"
          ],
          "custom_permissions": [
            "ecr:GetAuthorizationToken",
            "ecr:BatchGetImage",
            "ecr:GetDownloadUrlForLayer",
            "s3:GetObject"
          ]
        }
      }
    },
    "security_groups": {
      "ec2_sg": {
        "id": "sg-0a662e1623f9592c5",
        "inbound": [
          {
            "port": 22,
            "source": "admin-ip"
          },
          {
            "port": 8000,
            "source": "0.0.0.0/0"
          }
        ],
        "outbound": [
          {
            "port": "all",
            "destination": "0.0.0.0/0"
          }
        ]
      },
      "rds_sg": {
        "id": "sg-0c88bd30e77f3ebbd",
        "inbound": [
          {
            "port": 5432,
            "source_sg": "sg-0a662e1623f9592c5"
          }
        ],
        "outbound": [
          {
            "port": "all",
            "destination": "0.0.0.0/0"
          }
        ]
      }
    },
    "services": {
      "frontend": {
        "type": "S3",
        "bucket": "staging.ops.blazeops.ai",
        "static_website": true,
        "access": "public-read",
        "dns": "staging.ops.blazeops.ai"
      },
      "backend": {
        "type": "EC2",
        "name": "blazeops-backend-api",
        "subnet": "public",
        "container": {
          "source": "ECR",
          "repository": "blazeops-staging-repo"
        },
        "dns": "api.ops.blazeops.ai"
      },
      "database": {
        "type": "RDS",
        "engine": "postgresql",
        "subnet": "private",
        "port": 5432
      },
      "ecr": {
        "repository": "blazeops-staging-repo",
        "accessed_by": "EC2 IAM Role"
      }
    },
    "dns": {
      "route53": {
        "hosted_zone": "ops.blazeops.ai",
        "records": [
          {
            "name": "staging.ops.blazeops.ai",
            "type": "A",
            "target": "S3 static website endpoint"
          },
          {
            "name": "api.ops.blazeops.ai",
            "type": "A",
            "target": "EC2 public IP"
          }
        ]
      }
    },
    "end_to_end_flow": [
      "User → Route53 → S3 (Frontend)",
      "User → Route53 → EC2 (Backend API)",
      "EC2 → RDS (PostgreSQL on port 5432)",
      "EC2 → ECR (Docker image pull using IAM role)",
      "Private subnets → NAT Gateway → Internet (updates/patches)"
    ]
  }
}