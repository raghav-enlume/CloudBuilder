{
    "us-east-1": {
        "vpcs": [
            {
                "VpcId": "vpc-3tier-001",
                "CidrBlock": "10.0.0.0/16",
                "State": "available",
                "IsDefault": false
            }
        ],
        "subnets": [
            {
                "SubnetId": "subnet-public-a",
                "VpcId": "vpc-3tier-001",
                "CidrBlock": "10.0.1.0/24",
                "AvailabilityZone": "us-east-1a",
                "Type": "public"
            },
            {
                "SubnetId": "subnet-public-b",
                "VpcId": "vpc-3tier-001",
                "CidrBlock": "10.0.2.0/24",
                "AvailabilityZone": "us-east-1b",
                "Type": "public"
            },
            {
                "SubnetId": "subnet-app-a",
                "VpcId": "vpc-3tier-001",
                "CidrBlock": "10.0.11.0/24",
                "AvailabilityZone": "us-east-1a",
                "Type": "private"
            },
            {
                "SubnetId": "subnet-app-b",
                "VpcId": "vpc-3tier-001",
                "CidrBlock": "10.0.12.0/24",
                "AvailabilityZone": "us-east-1b",
                "Type": "private"
            },
            {
                "SubnetId": "subnet-db-a",
                "VpcId": "vpc-3tier-001",
                "CidrBlock": "10.0.21.0/24",
                "AvailabilityZone": "us-east-1a",
                "Type": "private"
            },
            {
                "SubnetId": "subnet-db-b",
                "VpcId": "vpc-3tier-001",
                "CidrBlock": "10.0.22.0/24",
                "AvailabilityZone": "us-east-1b",
                "Type": "private"
            }
        ],
        "internet_gateways": [
            {
                "InternetGatewayId": "igw-3tier-001",
                "Attachments": [
                    {
                        "VpcId": "vpc-3tier-001",
                        "State": "available"
                    }
                ]
            }
        ],
        "nat_gateways": [
            {
                "NatGatewayId": "nat-3tier-001",
                "SubnetId": "subnet-public-a",
                "State": "available"
            }
        ],
        "route_tables": [
            {
                "RouteTableId": "rtb-public",
                "VpcId": "vpc-3tier-001",
                "Type": "public",
                "Associations": [
                    {
                        "SubnetId": "subnet-public-a"
                    },
                    {
                        "SubnetId": "subnet-public-b"
                    }
                ],
                "Routes": [
                    {
                        "DestinationCidrBlock": "0.0.0.0/0",
                        "GatewayId": "igw-3tier-001"
                    }
                ]
            },
            {
                "RouteTableId": "rtb-private",
                "VpcId": "vpc-3tier-001",
                "Type": "private",
                "Associations": [
                    {
                        "SubnetId": "subnet-app-a"
                    },
                    {
                        "SubnetId": "subnet-app-b"
                    },
                    {
                        "SubnetId": "subnet-db-a"
                    },
                    {
                        "SubnetId": "subnet-db-b"
                    }
                ],
                "Routes": [
                    {
                        "DestinationCidrBlock": "0.0.0.0/0",
                        "NatGatewayId": "nat-3tier-001"
                    }
                ]
            }
        ],
        "security_groups": [
            {
                "GroupId": "sg-alb",
                "GroupName": "alb-sg",
                "Description": "ALB public access",
                "VpcId": "vpc-3tier-001",
                "IpPermissions": [
                    {
                        "IpProtocol": "tcp",
                        "FromPort": 80,
                        "ToPort": 80,
                        "IpRanges": [
                            {
                                "CidrIp": "0.0.0.0/0"
                            }
                        ]
                    },
                    {
                        "IpProtocol": "tcp",
                        "FromPort": 443,
                        "ToPort": 443,
                        "IpRanges": [
                            {
                                "CidrIp": "0.0.0.0/0"
                            }
                        ]
                    }
                ]
            },
            {
                "GroupId": "sg-app",
                "GroupName": "app-sg",
                "Description": "App tier access from ALB",
                "VpcId": "vpc-3tier-001",
                "IpPermissions": [
                    {
                        "IpProtocol": "tcp",
                        "FromPort": 8080,
                        "ToPort": 8080,
                        "UserIdGroupPairs": [
                            {
                                "GroupId": "sg-alb"
                            }
                        ]
                    }
                ]
            },
            {
                "GroupId": "sg-db",
                "GroupName": "db-sg",
                "Description": "DB access from app tier",
                "VpcId": "vpc-3tier-001",
                "IpPermissions": [
                    {
                        "IpProtocol": "tcp",
                        "FromPort": 5432,
                        "ToPort": 5432,
                        "UserIdGroupPairs": [
                            {
                                "GroupId": "sg-app"
                            }
                        ]
                    }
                ]
            }
        ],
        "load_balancers": [
            {
                "LoadBalancerName": "web-alb",
                "Type": "application",
                "Scheme": "internet-facing",
                "Subnets": [
                    "subnet-public-a",
                    "subnet-public-b"
                ],
                "SecurityGroups": [
                    "sg-alb"
                ]
            }
        ],
        "auto_scaling_groups": [
            {
                "AutoScalingGroupName": "app-asg",
                "Subnets": [
                    "subnet-app-a",
                    "subnet-app-b"
                ],
                "MinSize": 2,
                "MaxSize": 6,
                "DesiredCapacity": 2,
                "LaunchConfiguration": {
                    "InstanceType": "t3.medium",
                    "SecurityGroups": [
                        "sg-app"
                    ]
                }
            }
        ],
        "rds_instances": [
            {
                "db_instance_name": "webapp-db",
                "engine": "postgresql",
                "engine_version": "14.6",
                "db_instance_class": "db.t3.medium",
                "allocated_storage": 50,
                "multi_az": true,
                "subnet_type": "private",
                "subnet_ids": [
                    "subnet-db-a",
                    "subnet-db-b"
                ],
                "security_group": "sg-db"
            }
        ],
        "s3_buckets": [
            {
                "Name": "three-tier-app-assets",
                "Region": "us-east-1",
                "Versioning": "Enabled",
                "Encryption": "AES256"
            }
        ]
    }
}